{% extends 'base.html' %}

{% block title %}Label Preview - Summerfest{% endblock %}

{% block content %}
<div class="container py-4">
  <h2><i class="bi bi-tags"></i> Printable Label Preview</h2>
  <p class="text-muted">3cm x 5cm labels. Black & white friendly. Icons greyed when "No". This page is for layout testing only.</p>

  <div class="d-flex flex-wrap gap-3">
    {% for s in samples %}
    <div class="label-card">
      <div class="label-grid">
        <div class="col-left">
          <div class="first-name">{{ s.first_name }}</div>
          <div class="surname">{{ s.last_name }}</div>
          <div class="class-name">{{ s.class_display }}</div>
        </div>
        <div class="col-icons">
          <div class="icon {{ s.medical|yesno:'yes,no' }}" title="Medical needs">
            <!-- First aid cross -->
            <svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true">
              <rect x="9" y="3" width="6" height="18" rx="2"></rect>
              <rect x="3" y="9" width="18" height="6" rx="2"></rect>
            </svg>
          </div>
          <div class="icon {{ s.dietary|yesno:'yes,no' }}" title="Dietary needs">
            <!-- Plate with knife and fork -->
            <svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true">
              <circle cx="12" cy="12" r="7" fill="currentColor"></circle>
              <rect x="3" y="3" width="2" height="18"></rect>
              <rect x="19" y="3" width="2" height="18"></rect>
            </svg>
          </div>
          <div class="icon {{ s.photo|yesno:'yes,no'|lower == 'yes' and 'yes' or 'no' }}" title="Photo consent">
            <!-- Camera -->
            <svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true">
              <rect x="3" y="7" width="18" height="12" rx="2"></rect>
              <circle cx="12" cy="13" r="4" fill="white"></circle>
            </svg>
          </div>
        </div>
        <div class="col-yn">
          <div class="yn {{ s.medical|yesno:'yes,no' }}">{{ s.medical|yesno:'Yes,No' }}</div>
          <div class="yn {{ s.dietary|yesno:'yes,no' }}">{{ s.dietary|yesno:'Yes,No' }}</div>
          <div class="yn {{ s.photo|yesno:'yes,no'|lower == 'yes' and 'yes' or 'no' }}">{{ s.photo|yesno:'Yes,No' }}</div>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>

  <div class="mt-3">
    <button class="btn btn-outline-primary btn-sm" onclick="window.print()"><i class="bi bi-printer"></i> Print</button>
  </div>
</div>

<style>
/***** Physical size: 5cm x 3cm *****/
.label-card {
  width: 5cm;
  height: 3cm;
  border: 1px solid #000;
  padding: 0.2cm; /* ~2mm border equivalent */
  box-sizing: border-box;
}

/* 3 columns: text | icons | yes/no */
.label-grid {
  display: grid;
  grid-template-columns: 1fr auto auto;
  column-gap: 0.2cm; /* 2mm gap */
  height: 100%;
  align-items: center;
}

.col-left { display: flex; flex-direction: column; justify-content: center; }
.first-name { font-size: 10mm; line-height: 10mm; font-weight: 700; }
.surname { font-size: 2mm; line-height: 2mm; color: #666; margin: 2mm 0; text-transform: uppercase; }
.class-name { font-size: 10mm; line-height: 10mm; font-weight: 700; }

.col-icons { display: flex; flex-direction: column; align-items: center; gap: 2mm; }
.icon { color: #000; }
.icon.no { color: #bbb; filter: grayscale(100%); }

.col-yn { display: flex; flex-direction: column; align-items: flex-start; gap: 2mm; }
.yn { font-weight: 700; }
.yn.no { color: #bbb; }

@media print {
  body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
  .btn { display: none; }
}
</style>
{% endblock %}
